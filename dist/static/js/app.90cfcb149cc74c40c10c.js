webpackJsonp([1],{"1uuo":function(t,e){},"7zck":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("gJtD");var r=a("7+uW"),s=a("/ocq"),n=a("mtWM"),o=a.n(n);const l="https://optamo-backend.herokuapp.com";class i{constructor(){}getWeatherList(){const t=`${l}/api/weather/`;let e=localStorage.getItem("token");console.log(":::jwtToken:::::"+e);const a={Authorization:`jwt ${e}`};return o.a.get(t,{headers:a})}authenticateLogin(t){const e=`${l}/auth/`;return o.a.post(e,t)}}const c=new i;var u={name:"WeatherList",data:()=>({weather:[],validUserName:"Guest",weatherSize:0,search:"",headers:[{text:"Station ID",align:"left",sortable:!0,value:"station_id"},{text:"State",sortable:!0,align:"left",value:"state"},{text:"Precipitation",sortable:!1,align:"left"},{text:"Min Temperature",sortable:!0,align:"left",value:"temp_min"},{text:"Max Temperature",sortable:!1,align:"left"},{text:"Snowfall",sortable:!1,align:"left"}]}),mounted(){this.getWeather(),this.showMessages()},methods:{getWeather(){c.getWeatherList().then(t=>{this.weather=t.data.data,this.weatherSize=this.weather.length,localStorage.getItem("isAuthenticates")&&!0===JSON.parse(localStorage.getItem("isAuthenticates"))&&(this.validUserName=JSON.parse(localStorage.getItem("log_user")))}).catch(t=>{401===t.response.status&&(localStorage.removeItem("isAuthenticates"),localStorage.removeItem("log_user"),localStorage.removeItem("token"),w.push("/auth"))})}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[a("v-container",{attrs:{fluid:"","grid-list-md":"","fill-height":""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{md6:""}},[a("v-card-title",[t._v("\n          Weather History\n          "),a("v-spacer"),t._v(" "),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),a("v-data-table",{staticClass:"elevation-1",staticStyle:{"max-height":"300px","overflow-y":"auto"},attrs:{headers:t.headers,items:t.weather,search:t.search,"hide-actions":"",fixed:""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[t._v(t._s(e.item.station_id))]),t._v(" "),a("td",[t._v(t._s(e.item.state))]),t._v(" "),a("td",{attrs:{nowrap:"true"}},[t._v(t._s(e.item.precipitation))]),t._v(" "),a("td",{attrs:{nowrap:"true"}},[t._v(t._s(e.item.temp_min))]),t._v(" "),a("td",{attrs:{nowrap:"true"}},[t._v(t._s(e.item.temp_max))]),t._v(" "),a("td",{attrs:{nowrap:"true"}},[t._v(t._s(e.item.snowfall))])]}}])})],1)],1)],1)],1)},staticRenderFns:[]},v=a("VU/8")(u,h,!1,null,null,null).exports,d={name:"HelloWorld",data:()=>({msg:"Welcome to Your Vue.js App"})},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("h1",[t._v(t._s(t.msg))]),t._v(" "),a("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),a("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("\n        Core Docs\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("\n        Forum\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("\n        Community Chat\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("\n        Twitter\n      ")])]),t._v(" "),a("br"),t._v(" "),a("li",[a("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("\n        Docs for This Template\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};a("VU/8")(d,m,!1,function(t){a("1uuo")},"data-v-d8ec41bc",null).exports;const g=new i;var _={name:"Auth",data:()=>({credentials:{},valid:!0,showMsg:"",loading:!1,rules:{username:[t=>!!t||"Username is required",t=>t&&t.length>3||"A username must be more than 3 characters long",t=>/^[a-z0-9_]+$/.test(t)||"A username can only contain letters and digits"],password:[t=>!!t||"Password is required",t=>t&&t.length>7||"The password must be longer than 7 characters"]}}),methods:{login(){this.$refs.form.validate()&&(this.loading=!0,g.authenticateLogin(this.credentials).then(t=>{localStorage.setItem("token",t.data.token),localStorage.setItem("isAuthenticates",JSON.stringify(!0)),localStorage.setItem("log_user",JSON.stringify(this.credentials.username)),window.location="/"}).catch(t=>{this.loading=!1,localStorage.removeItem("isAuthenticates"),localStorage.removeItem("log_user"),localStorage.removeItem("token"),this.showMsg="error"}))}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":"","justify-center":"","fill-height":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",lg4:"",md5:""}},[a("v-card",{staticClass:"login-card"},[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Login")])]),t._v(" "),"error"===t.showMsg?a("v-alert",{attrs:{dismissible:"",value:!0,type:"error"}},[t._v("\n     Invalid username or password. Please Try again.\n    ")]):t._e(),t._v(" "),a("v-spacer"),t._v(" "),a("v-card-text",[t.loading?a("v-layout",{attrs:{row:"","fill-height":"","justify-center":"","align-center":""}},[a("v-progress-circular",{attrs:{size:50,color:"primary",indeterminate:""}})],1):a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-container",[a("v-text-field",{attrs:{counter:70,label:"username",rules:t.rules.username,maxlength:"70",required:""},model:{value:t.credentials.username,callback:function(e){t.$set(t.credentials,"username",e)},expression:"credentials.username"}}),t._v(" "),a("v-text-field",{attrs:{type:"password",counter:20,label:"password",rules:t.rules.password,maxlength:"20",required:""},model:{value:t.credentials.password,callback:function(e){t.$set(t.credentials,"password",e)},expression:"credentials.password"}})],1),t._v(" "),a("v-btn",{staticClass:"blue white--text",attrs:{disabled:!t.valid},on:{click:t.login}},[t._v("Login")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},f=a("VU/8")(_,p,!1,null,null,null).exports;r.default.use(s.a);var w=new s.a({mode:"history",base:Object({NODE_ENV:"production"}).BASE_URL,routes:[{path:"/",name:"Home",component:v},{path:"/auth",name:"Auth",component:f}]});const b=new i;var k={name:"App",data:()=>({authenticated:!1}),mounted(){b.getWeatherList().then(t=>{this.authenticated=!0}).catch(t=>{401===t.response.status&&(localStorage.removeItem("isAuthenticates"),localStorage.removeItem("log_user"),localStorage.removeItem("token"),this.authenticated=!1)}),console.log("this.authenticated--"+this.authenticated)},methods:{logout(){localStorage.removeItem("isAuthenticates"),localStorage.removeItem("log_user"),localStorage.removeItem("token"),this.authenticated=!1,window.location="/"},viewWeather(){w.push("/")},login(){w.push("/auth")},goHome(){w.push("/")}}},S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-toolbar",{staticClass:"blue"},[a("v-toolbar-title",[t._v("OPTAMO")]),t._v(" "),a("v-toolbar-items",[a("v-btn",{attrs:{flat:"",dark:""},on:{click:t.goHome}},[t._v("Home")]),t._v(" "),t.authenticated?t._e():a("v-btn",{attrs:{flat:"",dark:""},on:{click:t.login}},[t._v("Log in\n      ")]),t._v(" "),t.authenticated?a("v-btn",{attrs:{flat:"",dark:""},on:{click:t.logout}},[t._v("Log Out\n      ")]):t._e()],1)],1),t._v(" "),a("v-content",[a("router-view")],1)],1)},staticRenderFns:[]},x=a("VU/8")(k,S,!1,null,null,null).exports,y=a("3EgV"),I=a.n(y),A=(a("7zck"),a("18Sv")),j=a.n(A);r.default.use(I.a,{icons:{iconfont:"md"}}),r.default.use(j.a),r.default.config.productionTip=!1,new r.default({el:"#app",router:w,components:{App:x},template:"<App/>"})},gJtD:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.90cfcb149cc74c40c10c.js.map